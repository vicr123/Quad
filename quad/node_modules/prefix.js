const db = require("db");
const config = require("config");

module.exports = async (guild) => {
    if (!guild) return config.get("bot.prefix");
    
    let dbResp = await db.getPool().query("SELECT prefix FROM guildPrefix WHERE id=$1", [guild.id]);
    if (dbResp.rowCount > 0) {
        return dbResp.rows[0].prefix;
    } else {
        return config.get("bot.prefix");
    }
}